<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Redirect</title>
    <script>
        function logClickAndRedirect(email, redirectUrl) {
            // Log the click data to Google Apps Script
            fetch('https://script.google.com/a/macros/edreamsodigeo.com/s/AKfycbxXHPOOqk6lTXQKhGWtEUC-TUiyBc_thJBHljwrpQbwxRtulKRma461tCPmLJhqy5Hm/exec', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    email: email,
                    timestamp: new Date().toISOString(),
                    link: redirectUrl
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    // Redirect to the actual target URL
                    window.location.href = redirectUrl;
                } else {
                    console.error('Error logging click:', data);
                }
            })
            .catch(err => console.error('Error logging click:', err));
        }

        // Extract email and URL parameters from the URL
        const params = new URLSearchParams(window.location.search);
        const email = params.get('email');
        const redirectUrl = params.get('url');

        // Log the click and redirect if both email and URL are available
        if (email && redirectUrl) {
            logClickAndRedirect(email, redirectUrl);
        } else {
            console.error('Missing email or redirect URL');
        }
    </script>
</head>
<body>
    <h1>Redirecting...</h1>
</body>
</html>


